1124 JS 6 AJAX

## 비동기 (Asynchronous)

: 특정 작업의 실행이 완료될때까지 기다리지 않고 다음 작업을 즉시 실행하는 방식

ex) 커피 주문을 받고 완성되기 전에 다음 커피 주문을 받듯이

setTimeout()은 비동기 함수라 코드를 즉시 실행하지 않고, 3초 뒤에 실행하도록 예약만 한 뒤 바로 다음 코드로 넘어감

![image.png](attachment:beac404c-edd3-46a6-95d1-81958ec109ea:image.png)

|  | synchronous | Asynchronous |
| --- | --- | --- |
| 특징 | 시작 순서대로 처리 | 병렬적수행 |
|  | 앞 작업이 먼저 끝나야만 다음 작업 시작 가능 | 당장 처라를 완료할 수 없는 작업들은 백그라운드에서 실행되며 빨리 완료되는 작업부터 처리 |
| 장점 | 단순하고 예측 가능한 흐름 | - 시간이 오래 걸리는 작업을 백그라운드에 위임해 효율성 증가
- 프로그램이 멈추지 않아 사용자 경험 향상 |
| 단점 | 시간이 오래 걸리는 작업이 실행되면, 해당 작업이 끝날때까지 프로그램 전체가 멈춤 | 작업의 시작 순서와 완료 순서가 다를 수 있어, 복잡한 흐름과 결과값을 처리해야 하므로 코드의 복잡성 증가 |

JS는 한번에 하나의 일만 수행할수있는 Single Thread 언어로 동시에 여러 작업을 처리가능

↓

브라우저 환경에서의 JS 비동기 처리 관련 요소

- JS 엔진의 Call Stack
    - 코드가 실행되면 함수 호출이 순서대로 쌓이는 작업 공간
    - 기본적인 JS의 Single Thread 작업 처리
- Web API
    - 시간이 걸리거나 언제 실행될 지 모르는 비동기 작업들을 처리하는 곳
    - 브라우저에서 제공하는 Runtime 환경
- Task Queue
    - Web API에서 처리가 완료된 작업들이 순서대로 줄을 서서 기다리는 대기열
- Event Loop
    - Call stack 이 비어있는지 계속해서 확인하면서 비는 순간 Task Queue에서 가장 오래된 작업을 콜 스택으로 보내는 역할

![image.png](attachment:0d846c15-c448-4d85-983c-07c3c21173e1:image.png)

![image.png](attachment:4a47a72f-0f0f-48e6-8a22-741573efbc24:image.png)

![image.png](attachment:ccf7f69b-f5f8-4e57-a95f-5bdb8421b717:image.png)

![image.png](attachment:7ffefd8a-26ec-4a07-81b2-a30b6f11cdb0:image.png)

![image.png](attachment:3ded642a-2115-40d8-84c3-0fa62849667b:image.png)

![image.png](attachment:a4592e59-f81f-478a-931e-dfcdaa218371:image.png)

![image.png](attachment:b9dbc308-cb9b-44e6-9c0b-342b7159ffed:image.png)

## Ajax (Asynchronous JavaScript and XML)

: 비동기적인 웹 애플리케이션 개발을 위한 기술

목적

1. 비동기 통신
    - 웹페이지 전체를 새로고침하지 않고 서버와 데이터를 주고받을수있음
2. 부분 업데이트
    - 전체 페이지가 다시 로드되지 않고 HTML 페이지 일부 DOM만 업뎃
    - 페이지의 일부분만 동적으로 갱신할수있어 사용자 경험이 향상
3. 서버 부하 감소
    - 필요한 데이터만 요청하므로 서버의 부하를 줄일 수 있음

XHL(XHLHttpRequest)객체 

: 웹 브라우저와 서버 간의 비동기 통신을 가능케하는 JS객체

이벤트 핸들러느 비동기 프로그래밍한 형태

- 이벤트가 발생할때마다 호출되는 함수(콜백)를 제공하는 것
- HTTP 요청은 응답이 올때까지의 시간이 걸릴수있는 작업이라 비동기이며, 이벤트 핸들러를 XHL객체에 연결해 요청의 진행상태 및 최종 완료에 대한 응답을 받음

### Axios

: 간편하게 Ajax 통신할수 있도록 도와주는 JS라이브러리

→ 클라이언트 및 서버 사이에 HTTP 요청을 만들고 응답을 처리하는 데 간편하게 해주는 도구

브라우저를 위한 XHR 객체 생성

간편한 API를 제공하며 Promise 기반의 비동기 요청을 처리

Ajax를 활용한 클라이언트 서버간 동작

XHL 객체 생성 및 요청 → 응답 데이터 생성 → JSON 데이터 응답 → Promise 객체를 활용해 DOM 조작

![image.png](attachment:a325c294-edc3-45c2-9f1f-ed0b4eb9fab5:image.png)

Axios 설치 및 사용

![image.png](attachment:973cd38b-589b-4b13-937e-f6cff6a5ef69:image.png)

axios 객체를 활용해 요청을 보낸 후 응답 데이터 promise 객체를 받음

![image.png](attachment:6795a0f3-0c2c-4944-86b3-7fedf5243bfc:image.png)

Promise 객체

- JS에서 비동기 작업을 처리하기 위한 객체
- 비동기 작업의 최종 완료(또는 실패)와 그 결과값을 나타냄

![image.png](attachment:88a479a5-b9f0-4b7f-8720-9db9348c790a:image.png)

- then() : 작업이 성공적으로 완료되었을때 실행될 콜백함수를 지정
- catch() : 작업이 실패했을 때 실행될 콜백 함수를 지정

![image.png](attachment:07b9565e-8800-4cbb-a9c1-35990add4659:image.png)

![image.png](attachment:14bed9d5-0f1f-4bfe-82ae-f34c27fb617f:image.png)

정리

Ajax

- 하나의 특정한 기술을 의미하는 것이 아니라, 비동기적인 웹 애플리케이션 개발에 사용하는 기술들의 집합을 지칭
- 개념이자 접근 방식

Axios

- 클라이언트 및 서버 사이에 HTTP 요청을 만들고 응답을 처리하는 데 사용되는 JS라이브러리
- Promise API를 기반으로 하여 비동기 처리를 더 쉽게 할 수 있음
- 실현하는 구체적인 도구
- XMLHttpRequest를 추상화하여 더 사용하기 쉽게 만든 라이브러리

## Callback 과 Promise

비동기 처리의 특성

- 비동기 처리의 핵심은 작업이 시작되는 순서가 아니라 완료되는 순서에 따라 처리된다는 것
- 개발자 입장에서 코드의 실행순서가 불명확하다는 단점이 존재하고, 이로 인해 실행결과를 정확히 예측하며 코드를 작성하기 어려울 수 있음

비동기 처리 관리 방법

1. 비동기 콜백 : 비동기 작업이 완료된 후 실행될 함수를 미리 정의
    - 비동기적으로 처리되는 작업이 완료되었을때 실행되는 함수
    - 연쇄적으로 발생하는 비동기 작업을 순차적으로 동작헐 수 있게 함
    - 문제점 : 콜백 함수 → 비동기 처리를 위한 콜백을 작성할 때 마주하는 문제
    
    ↓
    
2. Promise : 비동기 작업의 최종 완료 또는 실패를 나타내는 객체
    
    > 작업이 끝나면 실행시켜줄게 라는 약속
    비동기 작업의 결과를 나타내는 객체 → 실패시 에러를 처리할수있는 기능 제공
    > 
    
    - then & chaining
        - axios로 처리한 비동기 로직은 항상 promise 객체를 반환
            
            → then을 계속 이어나가면서 작성할 수 있게 됨
            
            ↓
            
            결과적으로 비동기 작업의 순차적인 처리를 가능케 하며, 코드를 직관적이고 가독성 좋게
            
        - 장점
            
            ![image.png](attachment:4ebdfb57-b441-494f-9620-39bc52b593e4:image.png)
            
    
    - Promise가 제공하는 이점 (비동기 콜백과 비교)
        1. 실행 순서의 보장
        2. 유연한 비동기 처리
        3. 체이닝을 통한 연속적인 비동기 처리
        4. 에러 처리의 일원화